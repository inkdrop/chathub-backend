rabbitmq:
  image: rabbitmq:3-management
  ports:
    - "5672"
    - "15672:15672"
  volumes:
    - /var/lib/rabbitmq/
  environment:
    RABBITMQ_DEFAULT_USER: docker
    RABBITMQ_DEFAULT_PASS: docker

redis:
  image: redis
  ports:
    - "6379"
  volumes:
    - /data

api:
  image: luizkowalski/chathub
  ports:
    - "8080"
  links:
    - redis
    - rabbitmq

lb:
  image: 'dockercloud/haproxy:1.2.1'
  links:
    - api
  ports:
    - '80:80'
  roles:
    - global
